<html>

  <head>
    <script src="shared/jquery.js" type="text/javascript"></script>
    <script src="shared/shiny.js" type="text/javascript"></script>
    <!-- <link rel="stylesheet" type="text/css" href="shared/shiny.css"/> -->
    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/cosmo/bootstrap.min.css">
    <!--<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">-->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  
  </head>
 
  <body>
  
    <div class="container">
    
      <div class="page-header">
        <h1>CAPM & Market Factor Models</h1>
        <h1><small>Mathieu ZARADZKI - EDHEC 2014-2015</small></h1>
      </div>
    
      <div class="panel panel-success">
        <div class="panel-heading">Purpose of this demo</div>
        <div class="panel-body">
          Here we illustrate how the OLS framework can be used to test important financial theories about the Stock Market, namely the CAPM extension proposed by Fama-French.<br>
          The (mild) difficulty is that the result of an OLS procedure, the Linear Regression Estimates, are random variables.<br>
          However, UNDER GOOD CONDITIONS, the values returned by most software (e.g. Excel, Matlab) are UNBIASED estimates of the true model AND their distribution law uncertain (STD DEV >0) is easy to model.<br>
          This allows us to provide confidence interval for our model quantitative results.<br>
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Key notions to remember</div>
        <div class="panel-body">
          <span class="label label-success">(Student) t-stat</span>
          <span class="label label-success">F-distribution</span>
          <span class="label label-success">confidence interval</span>
          <span class="label label-success">null-hypothesis</span>
          <span class="label label-success">Durbin Watson</span>
          <span class="label label-success">Breusch Godfrey</span>
          <span class="label label-success">Jarque Berra</span>
          
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Experiment setup</div>
        <div class="panel-body">
        
          <div class="row">
            <div class="col-md-3">
              <label>SPX sub-sector:</label><br/> 
              <select name="sector" class="form-control">
                <option value="XLV">Health</option>
                <option value="XLF">Financial</option>
                <option value="XLK">Technology</option>
                <option value="XLI">Industry</option>
                <option value="XLY">Consumer Discr.</option>
                <option value="XLB">Materials</option>
              </select> 
            </div>
          </div>
        
          <!--<div class="row">
            <div class="col-md-3">
              <label>Error Standard Deviation:</label><br /> 
              <input type="number" name="stdeviation" class="form-control" value="10" min="0" max="100" />
            </div>
          </div>-->
          
        </div>
      </div>
     
      <div class="panel panel-info">
        <div class="panel-heading">Linear regression output</div>
        <div class="panel-body">
          <pre id="summary" class="shiny-text-output"></pre>
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Observed values against fitted values</div>
        <div class="panel-body">
          <div id="plotFit" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Durbin Watson Statistic</div>
        <div class="panel-body">
          <pre id="durbinwatson" class="shiny-text-output"></pre>
        </div>
        <div class="panel-footer">Remember the DW lies in the [0, 2] and 1-DW/2 is an auto-correlation proxy</div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Breusch-Godfrey Statistic</div>
        <div class="panel-body">
          <pre id="breuschgodfrey" class="shiny-text-output"></pre>
        </div>
        <div class="panel-footer">As the DW test is limited to first-order auto-correlation we use BG test for higher order analysis</div>
      </div>
      
      <!--<div class="panel panel-default">
        <div class="panel-heading">Skewness (Agostino) Statistic</div>
        <div class="panel-body">
          <pre id="agostinoskewness" class="shiny-text-output"></pre>
        </div>
      </div>-->
      
      <div class="panel panel-info">
        <div class="panel-heading">Jarque Berra Normality</div>
        <div class="panel-body">
          <pre id="jarqueberranormality" class="shiny-text-output"></pre>
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Residual term analysis</div>
        <div class="panel-body">
          <div id="plotError" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
        <div class="panel-footer">Heteroskedasdicity is fairly evident on the LHS chart</div>
      </div>
      
      <!--<div class="panel panel-default">
        <div class="panel-heading">Scaled Error term using VIX</div>
        <div class="panel-body">
          <div id="plotScaledError" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
      </div>-->
      
      <div class="panel panel-info">
        <div class="panel-heading">Regresion Report reading: standard deviation</div>
        <div class="panel-body">
          If you observe closely the empirical distribution of the many results displayed on the above box-plot you will note that the width are consistent with the standard deviations in the Regression Report.<br>
          Being able to read such reports is a MUST. 
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Regresion Report reading: student ratio</div>
        <div class="panel-body">
          Linear regression are about measuring a link (if any) between an Explained Variable and (one or several) Explanatory variable(s).<br>
          Is the question even relevant?<br>
          Given the OLS result is random, even if there is no singificant relationship between Y and X, we will be measuring a non-zero coefficient.<br>
          To decide if the results are more than just noise we use the student ratio.<br>
          Basically the Student-ratio is the Z-score of a coefficent.<br>
          However the Student-ratio does not follow a Normal Distribution (because the std. dev. is only empirical) and one needs to use a tabulated distribution.<br>
          This tabulated distribution depends on the Degree of Freedom of the model (NbObs - NbCoeffs). 
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Regresion Report reading: p value</div>
        <div class="panel-body">
          Obviously the table reading of the Student-ratio is rarely necessary as most software will take care of it.<br> 
        </div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Student-ratios</div>
        <div class="panel-body">
          <div id="plotStudents" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
        <div class="panel-footer">REMARK: It looks like a Normal (as expected) but it is different</div>
      </div>
      
      <!--<div class="panel panel-default">
        <div class="panel-heading">Fisher test of R2</div>
        <div class="panel-body">
          <div id="plotFisherR2" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
      </div>-->
      
      <div class="panel panel-info">
        <div class="panel-heading">Fisher test for the CAPM restriction</div>
        <div class="panel-body">
          <div id="plotFisherCAPM" class="shiny-plot-output" style="width:100%; height:400px"></div>
        </div>
        <div class="panel-footer">The null-hypothesis is that the SMB and HML factors are JOINTLY irrelevant</div>
      </div>
      
      <div class="panel panel-info">
        <div class="panel-heading">Correlation of the FF regression residuals</div>
        <div class="panel-body">
          <pre id="correlations" class="shiny-text-output"></pre>
        </div>
        <div class="panel-footer">Note that residual correlations are mostly neglectible</div>
      </div>
      
    </div>
  </body>

</html>